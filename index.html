<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>é¤“æ­»é¬¼ï½œå„åœ‹ç¾é£Ÿå“é‘‘èˆ‡é¤å»³è©•åƒ¹</title>

  <style>
    :root{
      --primary:#f4a261;
      --primary2:#e76f51;
      --nav:#f7c59f;
      --teal:#2a9d8f;
      --teal2:#21867a;
      --dark:#264653;
      --bg:#f8f8f8;
      --shadow:0 2px 10px rgba(0,0,0,0.08);
      --shadow2:0 1px 8px rgba(0,0,0,0.08);
      --border:#e8e8e8;
    }

    html { scroll-behavior: smooth; }

    body{
      margin:0;
      font-family: Arial, sans-serif;
      background: var(--bg);
      color:#222;
    }

    /* ===== é€²ç«™æ©«å¹… ===== */
    #intro{
      position:fixed;
      inset:0;
      z-index:2000;
      display:flex;
      align-items:center;
      justify-content:center;
      background:#000;
    }
    #intro img{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
      filter:brightness(0.55);
    }
    #intro .intro-content{
      position:relative;
      z-index:1;
      text-align:center;
      color:#fff;
      padding: 20px;
      width:min(860px, 92vw);
    }
    #intro h1{
      margin:0 0 8px;
      font-size: clamp(2.1rem, 4vw, 3rem);
      letter-spacing:1px;
    }
    #intro p{
      margin:0 0 16px;
      line-height:1.7;
      opacity:0.95;
    }
    #intro .start-btn{
      background: var(--teal);
      color:#fff;
      border:none;
      padding:12px 18px;
      border-radius: 12px;
      cursor:pointer;
      font-weight:bold;
      font-size:16px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.22);
      transition: transform .12s ease, background-color .12s ease;
    }
    #intro .start-btn:hover{ background: var(--teal2); transform: translateY(-1px); }
    #intro .small{
      margin-top: 10px;
      font-size: 13px;
      opacity:0.9;
    }

    /* ===== å·¦ä¸Šè§’ Logo ===== */
    .logo{
      position: fixed;
      top: 14px;
      left: 16px;
      z-index: 1500;
      display:flex;
      align-items:center;
      gap:10px;
      background: rgba(255,255,255,0.92);
      border:1px solid rgba(0,0,0,0.08);
      padding:8px 10px;
      border-radius: 12px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.08);
      cursor:pointer;
      user-select:none;
    }
    .logo img{
      height: 36px;
      width: auto;
      display:block;
    }
    .logo .brand{
      display:flex;
      flex-direction:column;
      line-height:1.1;
    }
    .logo .brand .name{ font-weight:bold; font-size:14px; }
    .logo .brand .tag{ font-size:11px; color:#666; margin-top:2px; }

    header{
      background: var(--primary);
      color:#fff;
      text-align:center;
      padding: 22px 12px;
    }
    header h1{
      margin:0;
      font-size: 2rem;
      letter-spacing: .5px;
    }

    nav{
      background: var(--nav);
      text-align:center;
      padding: 10px;
      position: sticky;
      top:0;
      z-index: 900;
    }
    nav a{
      color:#333;
      text-decoration:none;
      margin: 0 14px;
      font-weight:bold;
    }
    nav a:hover{ text-decoration: underline; }

    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 0 12px;
    }

    section{
      background:#fff;
      margin: 20px auto;
      border-radius: 14px;
      box-shadow: var(--shadow);
      padding: 28px;
    }

    .section-title{
      display:flex;
      align-items:center;
      gap:10px;
      margin: 0 0 14px;
    }
    .section-title h2{
      margin:0;
      color: var(--primary2);
      font-size: 1.45rem;
    }
    .rule{
      height:2px;
      background: linear-gradient(90deg, var(--primary2), transparent);
      border-radius:999px;
      margin: 8px 0 0;
    }

    /* å¡ç‰‡ */
    .cards{
      display:flex;
      flex-wrap:wrap;
      gap: 18px;
      justify-content:center;
      margin-top: 18px;
    }

    .card{
      width: 260px;
      border:1px solid var(--border);
      border-radius: 12px;
      box-shadow: var(--shadow2);
      padding: 12px;
      background:#fff;
      transition: transform .12s ease, box-shadow .12s ease;
    }
    .card:hover{
      transform: translateY(-2px);
      box-shadow: 0 14px 30px rgba(0,0,0,0.10);
    }

    .card img{
      width:100%;
      height: 155px;
      object-fit: cover;
      border-radius: 10px;
      border: 1px solid rgba(0,0,0,0.06);
      background: #f6f6f6;
      display:block;
    }

    .card h3{
      margin: 10px 0 6px;
      font-size: 1.05rem;
    }
    .card p{
      margin: 0 0 10px;
      color:#666;
      font-size: 13px;
      line-height:1.5;
    }

    .badge-row{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-bottom: 10px;
    }
    .badge{
      font-size: 12px;
      padding: 4px 8px;
      border-radius: 999px;
      border:1px solid rgba(0,0,0,0.08);
      background: #fafafa;
      color:#444;
    }

    .btn{
      display:inline-block;
      text-decoration:none;
      background: var(--teal);
      color:#fff;
      padding: 8px 12px;
      border-radius: 10px;
      font-size: 13px;
      font-weight:bold;
      border:none;
      cursor:pointer;
    }
    .btn:hover{ background: var(--teal2); }

    .btn-ghost{
      background:#f2f2f2;
      color:#333;
      border:1px solid #e6e6e6;
    }
    .btn-ghost:hover{
      background:#eaeaea;
    }

    .actions{
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
    }

    /* ===== Modal ===== */
    .modal{
      display:none;
      position:fixed;
      inset:0;
      z-index: 1900;
      background: rgba(0,0,0,0.55);
      padding: 18px;
    }
    .modal .panel{
      max-width: 760px;
      margin: 8vh auto 0;
      background:#fff;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.25);
      overflow:hidden;
    }
    .modal .panel-head{
      padding: 14px 16px;
      background: #fff5ee;
      border-bottom: 1px solid #f0e3da;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
    }
    .modal .panel-head h3{
      margin:0;
      color:#222;
      font-size: 1.1rem;
    }
    .close{
      cursor:pointer;
      padding: 6px 10px;
      border-radius: 10px;
      border:1px solid #e6e6e6;
      background:#fff;
      font-size: 18px;
      line-height: 1;
    }
    .close:hover{ background:#f3f3f3; }
    .modal .panel-body{
      padding: 16px;
    }
    .grid2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
    }
    @media (max-width: 820px){
      .grid2{ grid-template-columns: 1fr; }
    }
    .box{
      border:1px solid var(--border);
      border-radius: 14px;
      padding: 14px;
      background:#fff;
    }
    .box h4{ margin:0 0 8px; }
    .muted{ color:#666; font-size: 13px; line-height:1.6; }

    /* ===== è©•è«–å€ ===== */
    .review-top{
      display:flex;
      gap: 12px;
      flex-wrap:wrap;
      align-items:center;
      justify-content: space-between;
      margin-bottom: 10px;
    }
    .stat{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      align-items:center;
      color:#444;
      font-size: 13px;
    }
    .pill{
      background:#fafafa;
      border:1px solid rgba(0,0,0,0.08);
      padding: 6px 10px;
      border-radius: 999px;
    }

    form.review-form{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 10px;
    }
    form.review-form .full{ grid-column: 1 / -1; }
    input, select, textarea{
      width:100%;
      padding: 10px 10px;
      border:1px solid #e6e6e6;
      border-radius: 10px;
      font-size: 14px;
      outline: none;
      background:#fff;
      box-sizing:border-box;
    }
    textarea{ min-height: 92px; resize: vertical; }
    .form-actions{
      display:flex;
      gap:10px;
      justify-content:flex-end;
      grid-column: 1 / -1;
      flex-wrap:wrap;
    }

    .review-list{
      margin-top: 14px;
      display:flex;
      flex-direction: column;
      gap: 10px;
    }
    .review-item{
      border:1px solid var(--border);
      border-radius: 14px;
      padding: 12px;
      background:#fff;
    }
    .review-item .meta{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content: space-between;
      margin-bottom: 6px;
      font-size: 12px;
      color:#666;
    }
    .review-item .meta .left{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
    }
    .stars{ color:#e76f51; font-weight:bold; }
    .review-item .text{
      color:#333;
      line-height: 1.6;
      font-size: 14px;
      white-space: pre-wrap;
    }

    footer{
      margin-top: 26px;
      background: var(--dark);
      color:#fff;
      text-align:center;
      padding: 14px 10px;
      font-size: 13px;
    }
  </style>
</head>

<body>
  <!-- é€²ç«™æ©«å¹… -->
  <div id="intro">
    <img src="intro.png" alt="é€²ç«™æ©«å¹…">
    <div class="intro-content">
      <h1>ğŸ´ é¤“æ­»é¬¼ï½œå„åœ‹ç¾é£Ÿå“é‘‘</h1>
      <p>
        ç›®çš„ï¼šå“é‘‘å„åœ‹ç¾é£Ÿï¼Œå¹«åŠ©å¤§å®¶å°‹æ‰¾ç¾é£Ÿ<br>
        åå¥½ï¼šå¥½åƒçš„ ğŸ˜‹ï¼ˆæœ¬ç¶²ç«™ä»¥ã€Œå¥½åƒã€å€¼å¾—åƒã€ç‚ºå„ªå…ˆæ¨è–¦ï¼‰
      </p>
      <button class="start-btn" onclick="enterSite()">â–¶ é»æ“Šé–‹å§‹</button>
      <div class="small">ï¼ˆé–‹å§‹å¾Œå¯ç€è¦½é£Ÿè­œã€é¤å»³ä½ç½®èˆ‡ç•™è¨€è©•åƒ¹ï¼‰</div>
    </div>
  </div>

  <!-- å·¦ä¸Šè§’ Logoï¼ˆé»ä¸€ä¸‹å›åˆ°é ‚ç«¯ï¼‰ -->
  <div class="logo" onclick="scrollToTop()" title="å›åˆ°é ‚ç«¯">
    <img src="logo.png" alt="é¤“æ­»é¬¼ Logo">
    <div class="brand">
      <div class="name">é¤“æ­»é¬¼</div>
      <div class="tag">æ‰¾å¥½åƒçš„</div>
    </div>
  </div>

  <header>
    <h1>ğŸ´ é¤“æ­»é¬¼ï½œä¸­è¥¿ç¾é£Ÿä»‹ç´¹ ğŸœ</h1>
  </header>

  <nav>
    <a href="#foods">é£Ÿè­œ</a>
    <a href="#restaurants">æ¨è–¦é¤å»³</a>
    <a href="#about">é—œæ–¼æˆ‘å€‘</a>
  </nav>

  <div class="wrap">
    <!-- é£Ÿè­œ / å„åœ‹ç¾é£Ÿ -->
    <section id="foods">
      <div class="section-title">
        <h2>ğŸ² ç²¾é¸é£Ÿè­œ Recipes</h2>
      </div>
      <div class="rule"></div>

      <div class="cards">
        <div class="card">
          <img src="kungpao-chicken.jpg" alt="å®®ä¿é›ä¸">
          <h3>å®®ä¿é›ä¸</h3>
          <div class="badge-row">
            <span class="badge">åœ‹å®¶ï¼šå°ç£/ä¸­åœ‹</span>
            <span class="badge">å£å‘³ï¼šé¦™è¾£</span>
            <span class="badge">åå¥½ï¼šå¥½åƒçš„</span>
          </div>
          <p>ä¸­å¼ç¶“å…¸è¾£å‘³æ–™ç†ï¼Œé¦™è¾£ä¸‹é£¯ï¼Œé©åˆé…ç™½é£¯ã€‚</p>
          <div class="actions">
            <button class="btn" onclick="openFood('kungpao')">æŸ¥çœ‹ç°¡ä»‹</button>
            <button class="btn btn-ghost" onclick="openFood('kungpao','recipe')">çœ‹é£Ÿè­œæ­¥é©Ÿ</button>
          </div>
        </div>

        <div class="card">
          <img src="carbonara.jpg" alt="å¡é‚¦é‚£ç¾©å¤§åˆ©éºµ">
          <h3>å¡é‚¦é‚£ç¾©å¤§åˆ©éºµ</h3>
          <div class="badge-row">
            <span class="badge">åœ‹å®¶ï¼šç¾©å¤§åˆ©</span>
            <span class="badge">å£å‘³ï¼šæ¿ƒéƒ</span>
            <span class="badge">åå¥½ï¼šå¥½åƒçš„</span>
          </div>
          <p>ä»¥è›‹é»ƒã€èµ·å¸èˆ‡åŸ¹æ ¹é¦™æ°£ç‚ºä¸»ï¼Œå£æ„Ÿæ»‘é †ã€‚</p>
          <div class="actions">
            <button class="btn" onclick="openFood('carbonara')">æŸ¥çœ‹ç°¡ä»‹</button>
            <button class="btn btn-ghost" onclick="openFood('carbonara','recipe')">çœ‹é£Ÿè­œæ­¥é©Ÿ</button>
          </div>
        </div>

        <div class="card">
          <img src="margherita-pizza.jpg" alt="ç‘ªæ ¼éº—ç‰¹æŠ«è–©">
          <h3>ç‘ªæ ¼éº—ç‰¹æŠ«è–©</h3>
          <div class="badge-row">
            <span class="badge">åœ‹å®¶ï¼šç¾©å¤§åˆ©</span>
            <span class="badge">å£å‘³ï¼šæ¸…çˆ½</span>
            <span class="badge">åå¥½ï¼šå¥½åƒçš„</span>
          </div>
          <p>ç•ªèŒ„ã€èµ·å¸ã€ç¾…å‹’çš„ç¶“å…¸ä¸‰é‡å¥ï¼Œè¶Šç°¡å–®è¶Šè€ƒåŠŸå¤«ã€‚</p>
          <div class="actions">
            <button class="btn" onclick="openFood('pizza')">æŸ¥çœ‹ç°¡ä»‹</button>
            <button class="btn btn-ghost" onclick="openFood('pizza','recipe')">çœ‹é£Ÿè­œæ­¥é©Ÿ</button>
          </div>
        </div>
      </div>
    </section>

    <!-- æ¨è–¦é¤å»³ -->
    <section id="restaurants">
      <div class="section-title">
        <h2>ğŸ  æ¨è–¦é¤å»³ Restaurants</h2>
      </div>
      <div class="rule"></div>

      <div class="cards">
        <div class="card">
          <img src="restaurant-beefnoodle.jpg" alt="å°å··ç‰›è‚‰éºµ">
          <h3>å°å··ç‰›è‚‰éºµ</h3>
          <div class="badge-row">
            <span class="badge">é¡å‹ï¼šå°å¼</span>
            <span class="badge">æ¨è–¦ï¼šæ¹¯é ­æ¿ƒéƒ</span>
          </div>
          <p class="muted">åœ°å€ï¼šå°åŒ—å¸‚ä¸­æ­£å€ï¼ˆç¤ºç¯„ï¼‰<br>ç‰¹è‰²ï¼šç‰›è‚‰è»Ÿå«©ã€æ¹¯é ­æ¿ƒéƒã€‚</p>
          <div class="actions">
            <a class="btn" target="_blank" rel="noopener"
               href="https://www.google.com/maps/search/?api=1&query=%E5%8F%B0%E5%8C%97%E5%B8%82%E4%B8%AD%E6%AD%A3%E5%8D%80+%E7%89%9B%E8%82%89%E9%BA%B5">
              ğŸ“ é–‹åœ°åœ–
            </a>
            <button class="btn btn-ghost" onclick="openRestaurant('beefnoodle')">ç•™è¨€è©•åƒ¹</button>
          </div>
        </div>

        <div class="card">
          <img src="restaurant-roma.jpg" alt="Roma Trattoria">
          <h3>Roma Trattoria</h3>
          <div class="badge-row">
            <span class="badge">é¡å‹ï¼šç¾©å¼</span>
            <span class="badge">æ¨è–¦ï¼šå¡é‚¦é‚£/æŠ«è–©</span>
          </div>
          <p class="muted">åœ°å€ï¼šå°åŒ—å¸‚ï¼ˆç¤ºç¯„ï¼‰<br>ç‰¹è‰²ï¼šç¾©å¼æ°›åœã€é¤é»æ¿ƒéƒã€‚</p>
          <div class="actions">
            <a class="btn" target="_blank" rel="noopener"
               href="https://www.google.com/maps/search/?api=1&query=Roma+Trattoria">
              ğŸ“ é–‹åœ°åœ–
            </a>
            <button class="btn btn-ghost" onclick="openRestaurant('roma')">ç•™è¨€è©•åƒ¹</button>
          </div>
        </div>

        <div class="card">
          <img src="restaurant-bing.jpg" alt="é¤…é¦™åŠ">
          <h3>é¤…é¦™åŠ</h3>
          <div class="badge-row">
            <span class="badge">é¡å‹ï¼šå°åƒ</span>
            <span class="badge">æ¨è–¦ï¼šè”¥æ²¹é¤…</span>
          </div>
          <p class="muted">åœ°å€ï¼šå°åŒ—å¸‚ï¼ˆç¤ºç¯„ï¼‰<br>ç‰¹è‰²ï¼šå¹³åƒ¹ã€å¤–é…¥å…§Qã€‚</p>
          <div class="actions">
            <a class="btn" target="_blank" rel="noopener"
               href="https://www.google.com/maps/search/?api=1&query=%E8%94%A5%E6%B2%B9%E9%A4%85+%E5%B0%8F%E5%90%83">
              ğŸ“ é–‹åœ°åœ–
            </a>
            <button class="btn btn-ghost" onclick="openRestaurant('bing')">ç•™è¨€è©•åƒ¹</button>
          </div>
        </div>
      </div>
    </section>

    <!-- é—œæ–¼ -->
    <section id="about">
      <div class="section-title">
        <h2>ğŸ‘¨â€ğŸ³ é—œæ–¼é¤“æ­»é¬¼</h2>
      </div>
      <div class="rule"></div>

      <div class="box">
        <p class="muted" style="margin:0;">
          <b>éœ€æ±‚ / ç›®çš„ï¼š</b>å“é‘‘å„åœ‹ç¾é£Ÿï¼Œå¹«åŠ©äººå°‹æ‰¾ç¾é£Ÿã€‚<br>
          <b>åå¥½ï¼š</b>å¥½åƒçš„ï¼ˆä»¥ã€Œå€¼å¾—åƒã€ç‚ºå„ªå…ˆæ¨è–¦ï¼‰ã€‚<br>
          <b>åŠŸèƒ½ï¼š</b>å¯ä»¥çœ‹åˆ°å„ç¨®ç¾é£Ÿè³‡æ–™ç°¡ä»‹ã€çŸ¥é“åœ¨å“ªè£¡ï¼ˆåœ°åœ–ï¼‰ã€å¯ä»¥ç•™è¨€è©•è«–å°é¤å»³çš„è©•åƒ¹ã€‚<br><br>
          å°æé†’ï¼šç•™è¨€è©•åƒ¹ç›®å‰æ¡ç”¨ <b>localStorage</b>ï¼ˆå­˜åœ¨ä½ çš„ç€è¦½å™¨ï¼‰ï¼Œä¸éœ€è¦å¾Œç«¯ä¹Ÿèƒ½ç”¨ï¼›ä½†æ›é›»è…¦/æ¸…é™¤ç€è¦½å™¨è³‡æ–™ç•™è¨€æœƒæ¶ˆå¤±ã€‚
        </p>
      </div>
    </section>
  </div>

  <footer>
    Â© 2025 é¤“æ­»é¬¼ï½œä¸­è¥¿ç¾é£Ÿä»‹ç´¹ â€” åƒé£½æ‰æœ‰åŠ›æ°£è®€æ›¸ ğŸ˜‹
  </footer>

  <!-- ===== é£Ÿç‰© Modal ===== -->
  <div id="foodModal" class="modal" onclick="closeByMask(event,'foodModal')">
    <div class="panel">
      <div class="panel-head">
        <h3 id="foodTitle">é£Ÿç‰©</h3>
        <button class="close" onclick="closeModal('foodModal')">Ã—</button>
      </div>
      <div class="panel-body">
        <div class="grid2">
          <div class="box">
            <h4>è³‡æ–™ç°¡ä»‹</h4>
            <div id="foodIntro" class="muted"></div>
          </div>
          <div class="box">
            <h4>é£Ÿè­œæ­¥é©Ÿ</h4>
            <div id="foodRecipe" class="muted"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== é¤å»³è©•è«– Modal ===== -->
  <div id="restModal" class="modal" onclick="closeByMask(event,'restModal')">
    <div class="panel">
      <div class="panel-head">
        <h3 id="restTitle">é¤å»³è©•åƒ¹</h3>
        <button class="close" onclick="closeModal('restModal')">Ã—</button>
      </div>
      <div class="panel-body">
        <div class="review-top">
          <div class="stat">
            <span class="pill">å¹³å‡æ˜Ÿç­‰ï¼š<b id="avgStars">-</b></span>
            <span class="pill">ç•™è¨€æ•¸ï¼š<b id="countReviews">0</b></span>
          </div>
          <button class="btn btn-ghost" onclick="clearReviews()">æ¸…é™¤æ­¤é¤å»³ç•™è¨€</button>
        </div>

        <div class="box">
          <h4 style="margin:0 0 8px;">æ–°å¢ç•™è¨€</h4>
          <form class="review-form" onsubmit="submitReview(event)">
            <input id="userName" type="text" placeholder="ä½ çš„æš±ç¨±ï¼ˆå¯ä¸å¡«ï¼‰" maxlength="20">
            <select id="rating" required>
              <option value="" disabled selected>æ˜Ÿç­‰ï¼ˆå¿…å¡«ï¼‰</option>
              <option value="5">â˜…â˜…â˜…â˜…â˜… 5</option>
              <option value="4">â˜…â˜…â˜…â˜…â˜† 4</option>
              <option value="3">â˜…â˜…â˜…â˜†â˜† 3</option>
              <option value="2">â˜…â˜…â˜†â˜†â˜† 2</option>
              <option value="1">â˜…â˜†â˜†â˜†â˜† 1</option>
            </select>

            <textarea id="comment" class="full" placeholder="å¯«ä¸‹ä½ çš„è©•åƒ¹ï¼šå£å‘³ã€åƒ¹æ ¼ã€ç’°å¢ƒã€æœå‹™â€¦ï¼ˆå¿…å¡«ï¼‰" required></textarea>

            <div class="form-actions">
              <button class="btn" type="submit">é€å‡ºç•™è¨€</button>
              <button class="btn btn-ghost" type="button" onclick="closeModal('restModal')">é—œé–‰</button>
            </div>
          </form>
        </div>

        <div class="box" style="margin-top:14px;">
          <h4 style="margin:0 0 8px;">ç•™è¨€åˆ—è¡¨</h4>
          <div id="reviewList" class="review-list"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    /* ===== é€²ç«™ ===== */
    function enterSite(){
      document.getElementById("intro").style.display = "none";
    }
    function scrollToTop(){
      window.scrollTo({top:0, behavior:"smooth"});
    }

    /* ===== ç¾é£Ÿè³‡æ–™ï¼ˆå¯è‡ªè¡Œæ”¹æ–‡å­—ï¼‰ ===== */
    const foods = {
      kungpao: {
        title: "å®®ä¿é›ä¸",
        intro:
`åœ‹å®¶/é¢¨æ ¼ï¼šå°ç£/ä¸­åœ‹ï¼ˆå·èœç³»æ”¹è‰¯å¸¸è¦‹ï¼‰
ç‰¹è‰²ï¼šèŠ±æ¤’ï¼‹è¾£æ¤’çš„é¦™éº»è¾£ï¼Œé…ç™½é£¯è¶…åŠ åˆ†
é©åˆï¼šå–œæ­¡é‡å£å‘³ã€æƒ³åƒå¾ˆä¸‹é£¯çš„äºº`,
        recipe:
`1. é›ä¸åŠ é†¬æ²¹ã€ç±³é…’ã€å¤ªç™½ç²‰é†ƒ 10 åˆ†é˜
2. å°ç«çˆ†é¦™èŠ±æ¤’ã€ä¹¾è¾£æ¤’ã€è’œæœ«
3. ä¸‹é›ä¸ç‚’è‡³è®Šè‰²ï¼ŒåŠ å…¥é†¬æ±ï¼ˆé†¬æ²¹+é†‹+ç³–+å°‘é‡æ°´ï¼‰
4. åŠ å…¥èŠ±ç”Ÿèˆ‡è”¥æ®µï¼Œæ”¶æ±å®Œæˆ`
      },
      carbonara: {
        title: "å¡é‚¦é‚£ç¾©å¤§åˆ©éºµ",
        intro:
`åœ‹å®¶ï¼šç¾©å¤§åˆ©
ç‰¹è‰²ï¼šè›‹é»ƒï¼‹èµ·å¸çš„æ¿ƒéƒæ»‘é †ï¼ˆå‚³çµ±ä¸åŠ é®®å¥¶æ²¹ï¼‰
é©åˆï¼šå–œæ­¡æ¿ƒéƒèµ·å¸é¦™èˆ‡åŸ¹æ ¹çš„äºº`,
        recipe:
`1. ç…®éºµè‡³ 8 åˆ†ç†Ÿï¼Œä¿ç•™ä¸€äº›éºµæ°´
2. ç…åŸ¹æ ¹ï¼ˆæˆ–åŸ¹æ ¹ä¸ï¼‰åˆ°å¾®è„†å‡ºæ²¹
3. è›‹é»ƒï¼‹å¸•ç‘ªæ£®èµ·å¸æ‹Œå‹»ï¼ŒåŠ å°‘é‡éºµæ°´èª¿ç¨ åº¦
4. éºµèˆ‡åŸ¹æ ¹æ‹Œå‹»å¾Œé›¢ç«ï¼Œå†æ‹Œå…¥è›‹èµ·å¸é†¬ï¼Œç‘é»‘èƒ¡æ¤’`
      },
      pizza: {
        title: "ç‘ªæ ¼éº—ç‰¹æŠ«è–©",
        intro:
`åœ‹å®¶ï¼šç¾©å¤§åˆ©
ç‰¹è‰²ï¼šç•ªèŒ„ã€èµ·å¸ã€ç¾…å‹’çš„ç¶“å…¸ä¸‰é‡å¥
é©åˆï¼šå–œæ­¡æ¸…çˆ½ã€é‡è¦–é£Ÿæé¦™æ°£çš„äºº`,
        recipe:
`1. éºµç³°æ‰å¥½å¾Œç™¼é…µè‡³ 2 å€å¤§
2. é‹ªç•ªèŒ„ç³Š/é†¬ï¼‹è«æœ­ç‘æ‹‰ï¼‹ç¾…å‹’
3. é«˜æº«çƒ¤ 8â€“10 åˆ†é˜è‡³ä¸Šè‰²
4. å‡ºçˆå¯åŠ æ©„æ¬–æ²¹æå‡é¦™æ°£`
      }
    };

    function openFood(key, mode="intro"){
      const data = foods[key];
      if(!data) return;
      document.getElementById("foodTitle").textContent = data.title;
      document.getElementById("foodIntro").textContent = data.intro;
      document.getElementById("foodRecipe").textContent = data.recipe;
      document.getElementById("foodModal").style.display = "block";
    }

    /* ===== é¤å»³è©•è«–ï¼ˆlocalStorageï¼‰ ===== */
    const restaurants = {
      beefnoodle: { name:"å°å··ç‰›è‚‰éºµ" },
      roma: { name:"Roma Trattoria" },
      bing: { name:"é¤…é¦™åŠ" }
    };

    let currentRestKey = null;

    function storageKey(restKey){
      return "reviews_" + restKey;
    }

    function openRestaurant(restKey){
      currentRestKey = restKey;
      const r = restaurants[restKey];
      document.getElementById("restTitle").textContent = `é¤å»³è©•åƒ¹ï½œ${r ? r.name : "é¤å»³"}`;
      document.getElementById("restModal").style.display = "block";
      renderReviews();
    }

    function getReviews(){
      if(!currentRestKey) return [];
      try{
        const raw = localStorage.getItem(storageKey(currentRestKey));
        return raw ? JSON.parse(raw) : [];
      }catch(e){
        return [];
      }
    }

    function saveReviews(list){
      if(!currentRestKey) return;
      localStorage.setItem(storageKey(currentRestKey), JSON.stringify(list));
    }

    function starsText(n){
      const num = Number(n) || 0;
      return "â˜…".repeat(num) + "â˜†".repeat(5-num);
    }

    function formatTime(ts){
      const d = new Date(ts);
      const y = d.getFullYear();
      const m = String(d.getMonth()+1).padStart(2,"0");
      const day = String(d.getDate()).padStart(2,"0");
      const hh = String(d.getHours()).padStart(2,"0");
      const mm = String(d.getMinutes()).padStart(2,"0");
      return `${y}-${m}-${day} ${hh}:${mm}`;
    }

    function renderReviews(){
      const list = getReviews();
      const wrap = document.getElementById("reviewList");
      wrap.innerHTML = "";

      // çµ±è¨ˆ
      const count = list.length;
      document.getElementById("countReviews").textContent = count;

      if(count === 0){
        document.getElementById("avgStars").textContent = "-";
        wrap.innerHTML = `<div class="muted">ç›®å‰é‚„æ²’æœ‰ç•™è¨€ï¼Œä¾†ç•¶ç¬¬ä¸€å€‹è©•åƒ¹çš„äººå§ï¼</div>`;
        return;
      }

      const avg = (list.reduce((s,x)=>s+Number(x.rating||0),0)/count).toFixed(1);
      document.getElementById("avgStars").textContent = avg;

      // é¡¯ç¤ºï¼ˆæ–°åˆ°èˆŠï¼‰
      [...list].reverse().forEach(item=>{
        const div = document.createElement("div");
        div.className = "review-item";
        div.innerHTML = `
          <div class="meta">
            <div class="left">
              <span class="pill"><b>${item.name ? escapeHtml(item.name) : "åŒ¿å"}</b></span>
              <span class="pill stars">${starsText(item.rating)}ï¼ˆ${item.rating}ï¼‰</span>
            </div>
            <span class="pill">${formatTime(item.time)}</span>
          </div>
          <div class="text">${escapeHtml(item.comment)}</div>
        `;
        wrap.appendChild(div);
      });
    }

    function submitReview(e){
      e.preventDefault();
      if(!currentRestKey) return;

      const name = document.getElementById("userName").value.trim();
      const rating = document.getElementById("rating").value;
      const comment = document.getElementById("comment").value.trim();

      if(!rating || !comment){
        alert("è«‹å¡«æ˜Ÿç­‰èˆ‡ç•™è¨€å…§å®¹å–”ï¼");
        return;
      }

      const list = getReviews();
      list.push({
        name: name || "åŒ¿å",
        rating: Number(rating),
        comment,
        time: Date.now()
      });
      saveReviews(list);

      // æ¸…ç©ºè¡¨å–®
      document.getElementById("userName").value = "";
      document.getElementById("rating").value = "";
      document.getElementById("comment").value = "";

      renderReviews();
    }

    function clearReviews(){
      if(!currentRestKey) return;
      const ok = confirm("ç¢ºå®šè¦æ¸…é™¤é€™é–“é¤å»³çš„æ‰€æœ‰ç•™è¨€å—ï¼Ÿï¼ˆåªæœƒæ¸…é™¤ä½ é€™å°é›»è…¦/ç€è¦½å™¨çš„è³‡æ–™ï¼‰");
      if(!ok) return;
      localStorage.removeItem(storageKey(currentRestKey));
      renderReviews();
    }

    /* ===== Modal é–‹é—œ ===== */
    function closeModal(id){
      document.getElementById(id).style.display = "none";
    }
    function closeByMask(e, id){
      if(e.target && e.target.id === id){
        closeModal(id);
      }
    }
    document.addEventListener("keydown", (e)=>{
      if(e.key === "Escape"){
        closeModal("foodModal");
        closeModal("restModal");
      }
    });

    /* ===== å®‰å…¨ï¼šé¿å…ç•™è¨€æ’å…¥ HTML ===== */
    function escapeHtml(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }
  </script>
</body>
</html>
